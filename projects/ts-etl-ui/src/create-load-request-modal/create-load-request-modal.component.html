<h2 *ngIf="existingLoadRequest?.opRequestSeq; else newReqH2" mat-dialog-title>Edit Request</h2>
<ng-template #newReqH2>
  <h2 mat-dialog-title>Request Creation</h2>
</ng-template>
<form [formGroup]="loadRequestCreationForm">
  <mat-dialog-content class="mat-typography">
    <div class="flex flex-col">
      <mat-form-field appearance="outline">
        <mat-label>Code System Name</mat-label>
        <mat-select placeholder="Code System Name" formControlName="codeSystemName"
                    (selectionChange)="onCodeSystemNameSelectChange($event)">
          <mat-option value="">Select Code System</mat-option>
          <mat-option *ngFor="let CODE_SYSTEM_NAME of constantService.CREATE_REQUEST_CODE_SYSTEM_NAMES"
                      [value]="CODE_SYSTEM_NAME">{{CODE_SYSTEM_NAME}}</mat-option>
        </mat-select>
      </mat-form-field>
      <ng-container *ngIf="loadRequestCreationForm.get('codeSystemName')?.getRawValue() as codeSystemName">
        <ng-container *ngIf="CODE_SYSTEM_REQUIRED_SOURCE_FILE as requiredFiles">
          <mat-list role="list" class="border-gray-50 border-2 border-solid mb-3" *ngIf="requiredFiles.length">
            <strong mat-subheader>Required Source files of {{codeSystemName}}</strong>
            <mat-list-item role="listitem" *ngFor="let requiredFile of requiredFiles">
              <div matListItemTitle>{{requiredFile}}</div>
            </mat-list-item>
          </mat-list>
        </ng-container>
      </ng-container>
      <mat-form-field appearance="fill">
        <mat-label>Request Subject</mat-label>
        <input matInput placeholder="Request Subject" formControlName="requestSubject">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label for="sourcePathFile">Source File Path</mat-label>
        <input matInput formControlName="sourceFilePath">
        <mat-icon matSuffix (click)="fileUpload.click()" color="primary">attach_file</mat-icon>
        <input type="file" #fileUpload class="hidden" (change)="onFileSelected($event)" id="sourcePathFile"
               webkitdirectory directory>
        <mat-error *ngIf="loadRequestCreationForm.get('sourceFilePath')?.hasError('sourceFilePathError')">
          Please select source file from NLM server
        </mat-error>
      </mat-form-field>
      <div class="mb-5">
        <label id="load-request-type-label" for="load-request-type-radio">Request Type</label>
        <mat-radio-group aria-label-by="load-request-type-label" id="load-request-type-radio"
                         formControlName="requestType">
          <div class="ml-20">
            <mat-radio-button *ngFor="let LOAD_REQUEST_TYPE of ['Emergency', 'Regular', 'Scheduled']"
                              [value]="LOAD_REQUEST_TYPE"
                              class="block">{{LOAD_REQUEST_TYPE}}</mat-radio-button>
            <ng-container *ngIf="loadRequestCreationForm.get('requestType')?.value === 'Scheduled'">
              <mat-form-field appearance="outline" class="ml-3 dense-form-field">
                <mat-label>Scheduled Date</mat-label>
                <input matInput formControlName="scheduledDate" [matDatepicker]="picker"
                       [matDatepickerFilter]="futureDateFilter">
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
              <mat-form-field appearance="outline" class="dense-form-field">
                <mat-label>Scheduled time</mat-label>
                <mat-select formControlName="scheduledTime">
                  <mat-option value=""></mat-option>
                  <mat-option value="12:00 AM">12:00 AM</mat-option>
                  <mat-option value="12:30 AM">12:30 AM</mat-option>
                  <mat-option value="01:00 AM">1:00 AM</mat-option>
                  <mat-option value="01:30 AM">1:30 AM</mat-option>
                  <mat-option value="02:00 AM">2:00 AM</mat-option>
                  <mat-option value="02:30 AM">2:30 AM</mat-option>
                  <mat-option value="03:00 AM">3:00 AM</mat-option>
                  <mat-option value="03:30 AM">3:30 AM</mat-option>
                  <mat-option value="04:00 AM">4:00 AM</mat-option>
                  <mat-option value="04:30 AM">4:30 AM</mat-option>
                  <mat-option value="05:00 AM">5:00 AM</mat-option>
                  <mat-option value="05:30 AM">5:30 AM</mat-option>
                  <mat-option value="06:00 AM">6:00 AM</mat-option>
                  <mat-option value="06:30 AM">6:30 AM</mat-option>
                  <mat-option value="07:00 AM">7:00 AM</mat-option>
                  <mat-option value="07:30 AM">7:30 AM</mat-option>
                  <mat-option value="08:00 AM">8:00 AM</mat-option>
                  <mat-option value="08:30 AM">8:30 AM</mat-option>
                  <mat-option value="09:00 AM">9:00 AM</mat-option>
                  <mat-option value="09:30 AM">9:30 AM</mat-option>
                  <mat-option value="10:00 AM">10:00 AM</mat-option>
                  <mat-option value="10:30 AM">10:30 AM</mat-option>
                  <mat-option value="11:00 AM">11:00 AM</mat-option>
                  <mat-option value="11:30 AM">11:30 AM</mat-option>
                  <mat-option value="12:00 PM">12:00 PM</mat-option>
                  <mat-option value="12:30 PM">12:30 PM</mat-option>
                  <mat-option value="01:00 PM">1:00 PM</mat-option>
                  <mat-option value="01:30 PM">1:30 PM</mat-option>
                  <mat-option value="02:00 PM">2:00 PM</mat-option>
                  <mat-option value="02:30 PM">2:30 PM</mat-option>
                  <mat-option value="03:00 PM">3:00 PM</mat-option>
                  <mat-option value="03:30 PM">3:30 PM</mat-option>
                  <mat-option value="04:00 PM">4:00 PM</mat-option>
                  <mat-option value="04:30 PM">4:30 PM</mat-option>
                  <mat-option value="05:00 PM">5:00 PM</mat-option>
                  <mat-option value="05:30 PM">5:30 PM</mat-option>
                  <mat-option value="06:00 PM">6:00 PM</mat-option>
                  <mat-option value="06:30 PM">6:30 PM</mat-option>
                  <mat-option value="07:00 PM">7:00 PM</mat-option>
                  <mat-option value="07:30 PM">7:30 PM</mat-option>
                  <mat-option value="08:00 PM">8:00 PM</mat-option>
                  <mat-option value="08:30 PM">8:30 PM</mat-option>
                  <mat-option value="09:00 PM">9:00 PM</mat-option>
                  <mat-option value="09:30 PM">9:30 PM</mat-option>
                  <mat-option value="10:00 PM">10:00 PM</mat-option>
                  <mat-option value="10:30 PM">10:30 PM</mat-option>
                  <mat-option value="11:00 PM">11:00 PM</mat-option>
                  <mat-option value="11:30 PM">11:30 PM</mat-option>
                </mat-select>
              </mat-form-field>
              EST
            </ng-container>
          </div>
        </mat-radio-group>
      </div>
      <mat-form-field appearance="fill">
        <mat-label>Notification Email</mat-label>
        <input matInput placeholder="contact@nlm.nih.gov" formControlName="notificationEmail">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Requester</mat-label>
        <input matInput placeholder="Requester" type="email" formControlName="requester">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Request Date</mat-label>
        <input matInput placeholder="Request Date" formControlName="requestTime">
      </mat-form-field>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-raised-button color="primary" mat-dialog-close>Cancel</button>
    <button mat-raised-button color="warn" type="submit" [disabled]="loadRequestCreationForm.invalid"
            [mat-dialog-close]="loadRequestCreationForm.getRawValue()">Submit
    </button>
  </mat-dialog-actions>
</form>

